<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RS TECH</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
  <style>
:root {
  --c-cyan:   #19fff7;
  --c-green:  #46ff86;
  --c-yellow: #ffe066;
  --c-blue:   #02a6ff;
  --c-purple: #977cff;
  --c-bg-dark:#16271d;
  --c-bg-card:#193c2c;
  --txt: #eaffea;
  --tit: 'Orbitron', Arial, sans-serif;
  --bod: 'Share Tech Mono', monospace;
}

body {
  background: linear-gradient(120deg, #16271d 0%, #1b3440 100%);
  color: var(--txt);
  font-family: var(--bod);
  margin: 0;
  padding: 0 0 0 70px;
  min-height: 100vh;
}

header {
  background: transparent;
  color: var(--c-green);
  text-align: center;
  padding: 2.2rem 1rem 1.2rem 1rem;
  font-family: var(--tit);
  font-size: 2.2rem;
  font-weight: bold;
  letter-spacing: 2px;
  text-shadow: 0 2px 12px var(--c-cyan);
  border-bottom: 3px solid var(--c-cyan);
}

/* Barra lateral fixa e com rolagem sempre disponível */
.atalhos-lateral {
  position: fixed;
  top: 0; left: 0;
  width: 70px;
  height: 100dvh;
  height: 100vh; /* fallback para navegadores sem suporte a 100dvh */
  background: #153826;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.6rem;
  z-index: 99;
  box-shadow: 2px 0 14px #19fff733;
  padding-top: 1.2rem;
  overflow-y: scroll;
  overflow-x: hidden;
  border-right: 2px solid var(--c-green);
  scrollbar-width: thin;
  scrollbar-color: var(--c-green) #153826;
}

/* Barra de rolagem customizada para navegadores Webkit */
.atalhos-lateral::-webkit-scrollbar {
  width: 8px;
  background: #153826;
}
.atalhos-lateral::-webkit-scrollbar-thumb {
  background: var(--c-green);
  border-radius: 4px;
}

.atalhos-lateral .ataho-link {
  width: 44px; height: 44px;
  margin: 0.16rem 0;
  background: #143a22;
  color: var(--c-cyan);
  display: flex; align-items: center; justify-content: center;
  border-radius: 10px; font-size: 1.22rem;
  border: 1.5px solid transparent;
  transition: border .2s, color .2s, box-shadow .2s;
}
.atalhos-lateral .ataho-link:hover, .atalhos-lateral .ataho-link:focus {
  color: var(--c-yellow);
  border: 1.5px solid var(--c-yellow);
  box-shadow: 0 0 10px var(--c-yellow);
}
.atalhos-lateral .ataho-link.active {
  color: var(--c-green);
  border: 1.5px solid var(--c-green);
  box-shadow: 0 0 14px var(--c-green);
}

@media (max-width: 800px) {
  .atalhos-lateral { width: 54px; }
  body { padding-left: 54px; }
  .atalhos-lateral .ataho-link { width: 36px; height: 36px;}
}
@media (max-width: 600px) {
  .atalhos-lateral { width: 50px; }
  body { padding-left: 50px; }
  .atalhos-lateral .ataho-link { width: 30px; height: 30px; }
}

.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2rem;
  padding: 2rem 2vw 1rem 2vw;
  max-width: 1440px;
  margin: auto;
}
@media (max-width: 1100px) {
  .dashboard-grid { grid-template-columns: 1fr 1fr; gap: 1.1rem; }
}
@media (max-width: 800px) {
  .dashboard-grid { grid-template-columns: 1fr; gap: 1.1rem; }
}
@media (max-width: 600px) {
  .dashboard-grid { gap: 0.5rem; padding: 0.5rem 0.1rem; }
}

.card {
  background: var(--c-bg-card);
  border-radius: 1.5rem;
  box-shadow: 0 2px 18px #19fff733;
  padding: 1.2rem 1rem 1rem 1rem;
  display: flex;
  flex-direction: column;
  min-width: 250px;
  max-width: 100%;
  min-height: 340px;
  margin-bottom: 0.5rem;
  border: 2px solid var(--c-green);
  transition: border .16s, box-shadow .14s;
  overflow: hidden;
}
.card:hover {
  border: 2px solid var(--c-yellow);
  box-shadow: 0 6px 18px #ffe06633;
}
.card h2 {
  font-family: var(--tit);
  font-size: 1.14rem;
  color: var(--c-cyan);
  letter-spacing: 1px;
  margin: 0 0 1rem 0;
  text-align: center;
  border-bottom: 1.5px solid var(--c-yellow);
  padding-bottom: 0.5rem;
}
input, textarea, select {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  display: block;
  border-radius: 0.7rem;
  background: #163221;
  color: var(--txt);
  border: 1.5px solid var(--c-green);
  padding: 0.7rem 1rem;
  margin: 0.2rem 0 0.6rem 0;
  font-size: 1rem;
  font-family: var(--bod);
  transition: border 0.13s;
  outline: none;
}
input:focus, textarea:focus, select:focus {
  border: 1.5px solid var(--c-yellow);
}

.table-actions button {
  background: none;
  border: none;
  color: var(--c-green);
  font-size: 1.13rem;
  cursor: pointer;
  transition: color 0.14s;
}
.table-actions button:hover { color: var(--c-yellow); }

table {
  width: 100%;
  border-collapse: collapse;
  background: #133829;
  color: var(--txt);
  border-radius: 1rem;
  margin-bottom: 1rem;
  font-size: 0.97rem;
  box-shadow: 0 1px 6px #19fff722;
  overflow: hidden;
}
th, td {
  padding: 0.6rem 0.4rem;
  text-align: left;
  border-bottom: 1px solid #263b2b;
}
th {
  color: var(--c-green);
  font-family: var(--tit);
  border-bottom: 2px solid var(--c-cyan);
}

.portal-acesso {
  background: transparent;
  color: var(--c-green);
  border-radius: 1.2rem;
  border: 2px solid var(--c-cyan);
  font-family: var(--tit);
  text-align: center;
  font-size: 1.08rem;
  font-weight: bold;
  box-shadow: 0 2px 12px #19fff733;
  padding: 2rem 1rem;
  margin: 2rem auto 1.5rem auto;
  max-width: 700px;
  transition: border .19s, color .19s;
  cursor: pointer;
  text-decoration: none;
  letter-spacing: 1.15px;
  display: block;
}
.portal-acesso:hover { color: var(--c-yellow); border-color: var(--c-yellow);}
.main-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.5rem;
  margin: 0 0 2.5rem 0;
}
.btn-export, .btn-import, .btn {
  background: transparent;
  color: var(--c-cyan);
  font-family: var(--tit);
  border: 1.5px solid var(--c-cyan);
  border-radius: 1.1rem;
  padding: 0.7rem 1.6rem;
  font-size: 1.06rem;
  font-weight: bold;
  cursor: pointer;
  transition: border .14s, color .14s, background .14s;
  margin-top: 0.2rem;
}
.btn-export:hover, .btn-import:hover, .btn:hover {
  color: var(--c-green);
  border: 1.5px solid var(--c-green);
  background: #1d342a;
}

footer {
  width: 100%;
  text-align: center;
  color: #5beebb;
  font-size: 1rem;
  font-family: var(--tit);
  letter-spacing: 0.2em;
  margin-top: 2.4rem;
  margin-bottom: 1.2rem;
  opacity: 0.7;
  user-select: none;
}
  </style>
</head>
<body>
  <!-- Barra lateral fixa vertical com todos os atalhos -->
  <nav class="atalhos-lateral" aria-label="Atalhos Rápidos">
    <a href="https://classroom.google.com/" target="_blank" class="ataho-link" title="Google Classroom"><i class="fab fa-google"></i></a>
    <a href="https://meet.google.com/" target="_blank" class="ataho-link" title="Google Meet"><i class="fas fa-video"></i></a>
    <a href="https://drive.google.com/" target="_blank" class="ataho-link" title="Google Drive"><i class="fab fa-google-drive"></i></a>
    <a href="https://docs.google.com/" target="_blank" class="ataho-link" title="Google Docs"><i class="far fa-file-alt"></i></a>
    <a href="https://sheets.google.com/" target="_blank" class="ataho-link" title="Google Planilhas"><i class="fas fa-table"></i></a>
    <a href="https://calendar.google.com/" target="_blank" class="ataho-link" title="Google Agenda"><i class="far fa-calendar-alt"></i></a>
    <a href="https://slides.google.com/" target="_blank" class="ataho-link" title="Google Apresentações"><i class="fas fa-chalkboard"></i></a>
    <a href="https://fast.com/" target="_blank" class="ataho-link" title="Teste de Velocidade (Fast)"><i class="fas fa-laptop"></i></a>
    <a href="https://convertio.co/pt/" target="_blank" class="ataho-link" title="Convertio"><i class="fas fa-globe"></i></a>
    <a href="https://ravellsl.github.io/ferramenta-dev-links/" target="_blank" class="ataho-link" title="Dev Links"><i class="fas fa-code"></i></a>
    <a href="https://ravellsl.github.io/agentes-de-IA/" target="_blank" class="ataho-link" title="Agentes de IA"><i class="fas fa-robot"></i></a>
    <a href="https://www.videosmaller.com/pt/" target="_blank" class="ataho-link" title="Compressor de Vídeo"><i class="fas fa-exchange-alt"></i></a>
    <a href="https://ravellsl.github.io/ferramenta-busca-noticias/" target="_blank" class="ataho-link" title="Notícias"><i class="fas fa-newspaper"></i></a>
  </nav>
  <header>
    RS TECH
  </header>
  <main class="dashboard-grid">
    <!-- Bloco de Notas -->
    <div class="card bloco-notas">
      <h2>Bloco de Notas</h2>
      <textarea id="blocoNotas" rows="5" placeholder="Digite suas anotações livres..."></textarea>
      <button class="btn" onclick="salvarBlocoNotas()">Salvar</button>
    </div>
    <!-- Diário de Classe -->
    <div class="card diario-classe">
      <h2>Diário de Classe</h2>
      <textarea id="diarioClasse" rows="5" placeholder="Descreva o que foi realizado em aula..."></textarea>
      <button class="btn" onclick="salvarDiarioClasse()">Salvar</button>
    </div>
    <!-- Anotações Rápidas -->
    <div class="card anotacoes-rapidas">
      <h2>Anotações Rápidas</h2>
      <form onsubmit="event.preventDefault(); adicionarAnotacao();">
        <input id="anotacaoInput" placeholder="Digite uma anotação rápida" autocomplete="off" oninput="mostrarBotoesAnotacao()">
        <button class="btn" type="submit" id="btnAddAnotacao" style="display:none;">Adicionar</button>
        <button class="btn" type="button" id="btnLimparAnotacao" style="display:none;" onclick="limparAnotacaoCampos()">Limpar Tudo</button>
      </form>
      <table id="tabelaAnotacoes">
        <thead>
          <tr><th>Anotação</th><th style="width:70px;">Ações</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <!-- Cadastro de Alunos -->
    <div class="card cadastro-alunos">
      <h2>Cadastro de Alunos (AnyDesk)</h2>
      <form onsubmit="event.preventDefault(); adicionarAluno();">
        <input id="nomeAluno" placeholder="Nome do Aluno" autocomplete="off" oninput="mostrarBotoesAluno()">
        <input id="anydeskAluno" placeholder="AnyDesk do Aluno" autocomplete="off" oninput="mostrarBotoesAluno()">
        <button class="btn" type="submit" id="btnAlunoAdd" style="display:none;">Cadastrar</button>
        <button class="btn" type="button" id="btnAlunoEdit" style="display:none;" onclick="confirmarEdicaoAluno()">Salvar Edição</button>
        <button class="btn" type="button" id="btnAlunoCancel" style="display:none;" onclick="cancelarEdicaoAluno()">Cancelar</button>
        <button class="btn" type="button" id="btnAlunoLimpar" style="display:none;" onclick="limparAlunoCampos()">Limpar Tudo</button>
      </form>
      <table id="tabelaAlunos">
        <thead>
          <tr><th>Nome</th><th>AnyDesk</th><th style="width:80px;">Ações</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <!-- Tarefas Pendentes -->
    <div class="card tarefas-pendentes">
      <h2>Tarefas Pendentes</h2>
      <form onsubmit="event.preventDefault(); adicionarTarefa();">
        <input id="tarefaInput" placeholder="Adicionar nova tarefa" autocomplete="off" oninput="mostrarBotoesTarefa()">
        <button class="btn" type="submit" id="btnTarefaAdd" style="display:none;">Adicionar</button>
        <button class="btn" type="button" id="btnTarefaEdit" style="display:none;" onclick="confirmarEdicaoTarefa()">Salvar Edição</button>
        <button class="btn" type="button" id="btnTarefaCancel" style="display:none;" onclick="cancelarEdicaoTarefa()">Cancelar</button>
        <button class="btn" type="button" id="btnTarefaLimpar" style="display:none;" onclick="limparTarefaCampos()">Limpar Tudo</button>
      </form>
      <table id="tabelaTarefas">
        <thead>
          <tr><th>Tarefa</th><th>Status</th><th style="width:90px;">Ações</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <!-- Controle Financeiro -->
    <div class="card controle-financeiro">
      <h2>Controle Financeiro de Mensalidades</h2>
      <form onsubmit="event.preventDefault(); adicionarFinanceiro();">
        <input id="nomeFinanceiro" placeholder="Nome do Aluno" autocomplete="off" oninput="mostrarBotoesFinanceiro()">
        <input id="valorFinanceiro" type="number" placeholder="Valor (R$)" autocomplete="off" oninput="mostrarBotoesFinanceiro()">
        <select id="statusFinanceiro" onchange="mostrarBotoesFinanceiro()">
          <option value="Pago">Pago</option>
          <option value="Pendente">Pendente</option>
        </select>
        <button class="btn" type="submit" id="btnFinAdd" style="display:none;">Lançar</button>
        <button class="btn" type="button" id="btnFinEdit" style="display:none;" onclick="confirmarEdicaoFinanceiro()">Salvar Edição</button>
        <button class="btn" type="button" id="btnFinCancel" style="display:none;" onclick="cancelarEdicaoFinanceiro()">Cancelar</button>
        <button class="btn" type="button" id="btnFinLimpar" style="display:none;" onclick="limparFinanceiroCampos()">Limpar Tudo</button>
      </form>
      <table id="tabelaFinanceiro">
        <thead>
          <tr><th>Nome</th><th>Valor</th><th>Status</th><th style="width:90px;">Ações</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </main>
  <a class="portal-acesso" href="https://ravellsl.github.io/rstech/" target="_blank">
    <i class="fas fa-external-link-alt"></i> ACESSO AO PORTAL PRINCIPAL
  </a>
  <!-- Botões principais após portal -->
  <div class="main-controls">
    <button class="btn-export" onclick="exportarDados()"><i class="fas fa-download"></i> Exportar Dados</button>
    <label class="btn-import" style="display:inline-block;cursor:pointer;">
      <i class="fas fa-upload"></i> Importar Dados
      <input type="file" id="importFile" accept=".json" style="display:none" onchange="importarDados(event)">
    </label>
  </div>
  <footer>
    2025
  </footer>
  <script>
    // BLOCO DE NOTAS E DIÁRIO DE CLASSE
    function salvarBlocoNotas() {
      localStorage.setItem('blocoNotas', document.getElementById('blocoNotas').value);
      alert('Bloco de Notas salvo com sucesso.');
    }
    document.getElementById('blocoNotas').value = localStorage.getItem('blocoNotas') || '';
    function salvarDiarioClasse() {
      localStorage.setItem('diarioClasse', document.getElementById('diarioClasse').value);
      alert('Diário de Classe salvo.');
    }
    document.getElementById('diarioClasse').value = localStorage.getItem('diarioClasse') || '';

    function mostrarBotoesAnotacao() {
      const val = document.getElementById('anotacaoInput').value.trim();
      document.getElementById('btnAddAnotacao').style.display = val ? '' : 'none';
      document.getElementById('btnLimparAnotacao').style.display = val ? '' : 'none';
    }
    function mostrarBotoesAluno() {
      const nome = document.getElementById('nomeAluno').value.trim();
      const anydesk = document.getElementById('anydeskAluno').value.trim();
      const show = nome || anydesk;
      document.getElementById('btnAlunoAdd').style.display = show ? '' : 'none';
      document.getElementById('btnAlunoLimpar').style.display = show ? '' : 'none';
    }
    function mostrarBotoesTarefa() {
      const val = document.getElementById('tarefaInput').value.trim();
      document.getElementById('btnTarefaAdd').style.display = val ? '' : 'none';
      document.getElementById('btnTarefaLimpar').style.display = val ? '' : 'none';
    }
    function mostrarBotoesFinanceiro() {
      const nome = document.getElementById('nomeFinanceiro').value.trim();
      const valor = document.getElementById('valorFinanceiro').value.trim();
      const show = nome || valor;
      document.getElementById('btnFinAdd').style.display = show ? '' : 'none';
      document.getElementById('btnFinLimpar').style.display = show ? '' : 'none';
    }
    // --- ANOTAÇÕES RÁPIDAS ---
    let anotacaoEditIdx = null;
    function adicionarAnotacao() {
      const val = document.getElementById('anotacaoInput').value.trim();
      if (!val) return;
      let anotacoes = JSON.parse(localStorage.getItem('anotacoesRapidas') || '[]');
      if (anotacaoEditIdx === null) {
        anotacoes.push(val);
      } else {
        anotacoes[anotacaoEditIdx] = val;
        anotacaoEditIdx = null;
        document.getElementById('btnTarefaAdd').style.display = 'none';
        document.getElementById('btnTarefaEdit').style.display = 'none';
        document.getElementById('btnTarefaCancel').style.display = 'none';
      }
      localStorage.setItem('anotacoesRapidas', JSON.stringify(anotacoes));
      listarAnotacoes();
      document.getElementById('anotacaoInput').value = '';
      mostrarBotoesAnotacao();
    }
    function editarAnotacao(idx) {
      let anotacoes = JSON.parse(localStorage.getItem('anotacoesRapidas') || '[]');
      document.getElementById('anotacaoInput').value = anotacoes[idx];
      anotacaoEditIdx = idx;
      document.getElementById('btnAddAnotacao').style.display = 'none';
      document.getElementById('btnLimparAnotacao').style.display = 'none';
    }
    function limparAnotacaoCampos() {
      document.getElementById('anotacaoInput').value = '';
      mostrarBotoesAnotacao();
    }
    function removerAnotacao(idx) {
      let anotacoes = JSON.parse(localStorage.getItem('anotacoesRapidas') || '[]');
      anotacoes.splice(idx,1);
      localStorage.setItem('anotacoesRapidas', JSON.stringify(anotacoes));
      listarAnotacoes();
    }
    function cancelarEdicaoAnotacao() {
      anotacaoEditIdx = null;
      document.getElementById('anotacaoInput').value = '';
      mostrarBotoesAnotacao();
    }
    function listarAnotacoes() {
      let anotacoes = JSON.parse(localStorage.getItem('anotacoesRapidas') || '[]');
      let tbody = document.getElementById('tabelaAnotacoes').getElementsByTagName('tbody')[0];
      tbody.innerHTML = '';
      anotacoes.forEach((a, idx) => {
        tbody.innerHTML += `
          <tr>
            <td>${a}</td>
            <td class="table-actions">
              <button onclick="removerAnotacao(${idx})" title="Remover"><i class="fas fa-trash"></i></button>
            </td>
          </tr>`;
      });
      cancelarEdicaoAnotacao();
    }
    listarAnotacoes();
    // --- CADASTRO DE ALUNOS ---
    let alunoEditIdx = null;
    function adicionarAluno() {
      const nome = document.getElementById('nomeAluno').value.trim();
      const anydesk = document.getElementById('anydeskAluno').value.trim();
      if (!nome || !anydesk) { alert('Preencha ambos os campos.'); return; }
      let lista = JSON.parse(localStorage.getItem('alunosAnyDesk') || '[]');
      if (alunoEditIdx === null) {
        lista.push({nome, anydesk});
      } else {
        lista[alunoEditIdx] = {nome, anydesk};
        alunoEditIdx = null;
        document.getElementById('btnAlunoAdd').style.display = 'none';
        document.getElementById('btnAlunoEdit').style.display = 'none';
        document.getElementById('btnAlunoCancel').style.display = 'none';
      }
      localStorage.setItem('alunosAnyDesk', JSON.stringify(lista));
      listarAlunos();
      document.getElementById('nomeAluno').value = '';
      document.getElementById('anydeskAluno').value = '';
      mostrarBotoesAluno();
    }
    function editarAluno(idx) {
      let lista = JSON.parse(localStorage.getItem('alunosAnyDesk') || '[]');
      document.getElementById('nomeAluno').value = lista[idx].nome;
      document.getElementById('anydeskAluno').value = lista[idx].anydesk;
      alunoEditIdx = idx;
      document.getElementById('btnAlunoAdd').style.display = 'none';
      document.getElementById('btnAlunoEdit').style.display = '';
      document.getElementById('btnAlunoCancel').style.display = '';
      document.getElementById('btnAlunoLimpar').style.display = 'none';
    }
    function confirmarEdicaoAluno() { adicionarAluno(); }
    function cancelarEdicaoAluno() {
      alunoEditIdx = null;
      document.getElementById('nomeAluno').value = '';
      document.getElementById('anydeskAluno').value = '';
      document.getElementById('btnAlunoAdd').style.display = 'none';
      document.getElementById('btnAlunoEdit').style.display = 'none';
      document.getElementById('btnAlunoCancel').style.display = 'none';
      mostrarBotoesAluno();
    }
    function limparAlunoCampos() {
      document.getElementById('nomeAluno').value = '';
      document.getElementById('anydeskAluno').value = '';
      mostrarBotoesAluno();
    }
    function removerAluno(idx) {
      let lista = JSON.parse(localStorage.getItem('alunosAnyDesk') || '[]');
      lista.splice(idx,1);
      localStorage.setItem('alunosAnyDesk', JSON.stringify(lista));
      listarAlunos();
    }
    function listarAlunos() {
      let lista = JSON.parse(localStorage.getItem('alunosAnyDesk') || '[]');
      let tbody = document.getElementById('tabelaAlunos').getElementsByTagName('tbody')[0];
      tbody.innerHTML = '';
      lista.forEach((a, idx) => {
        tbody.innerHTML += `
          <tr>
            <td>${a.nome}</td>
            <td>${a.anydesk}</td>
            <td class="table-actions">
              <button onclick="removerAluno(${idx})" title="Remover"><i class="fas fa-trash"></i></button>
            </td>
          </tr>`;
      });
      cancelarEdicaoAluno();
    }
    listarAlunos();
    // --- TAREFAS PENDENTES ---
    let tarefaEditIdx = null;
    function adicionarTarefa() {
      const val = document.getElementById('tarefaInput').value.trim();
      if (!val) return;
      let tarefas = JSON.parse(localStorage.getItem('tarefasPendentes') || '[]');
      if (tarefaEditIdx === null) {
        tarefas.push({tarefa: val, done: false});
      } else {
        tarefas[tarefaEditIdx].tarefa = val;
        tarefaEditIdx = null;
        document.getElementById('btnTarefaAdd').style.display = 'none';
        document.getElementById('btnTarefaEdit').style.display = 'none';
        document.getElementById('btnTarefaCancel').style.display = 'none';
      }
      localStorage.setItem('tarefasPendentes', JSON.stringify(tarefas));
      listarTarefas();
      document.getElementById('tarefaInput').value = '';
      mostrarBotoesTarefa();
    }
    function editarTarefa(idx) {
      let tarefas = JSON.parse(localStorage.getItem('tarefasPendentes') || '[]');
      document.getElementById('tarefaInput').value = tarefas[idx].tarefa;
      tarefaEditIdx = idx;
      document.getElementById('btnTarefaAdd').style.display = 'none';
      document.getElementById('btnTarefaEdit').style.display = '';
      document.getElementById('btnTarefaCancel').style.display = '';
      document.getElementById('btnTarefaLimpar').style.display = 'none';
    }
    function confirmarEdicaoTarefa() { adicionarTarefa(); }
    function cancelarEdicaoTarefa() {
      tarefaEditIdx = null;
      document.getElementById('tarefaInput').value = '';
      document.getElementById('btnTarefaAdd').style.display = 'none';
      document.getElementById('btnTarefaEdit').style.display = 'none';
      document.getElementById('btnTarefaCancel').style.display = 'none';
      mostrarBotoesTarefa();
    }
    function limparTarefaCampos() {
      document.getElementById('tarefaInput').value = '';
      mostrarBotoesTarefa();
    }
    function removerTarefa(idx) {
      let tarefas = JSON.parse(localStorage.getItem('tarefasPendentes') || '[]');
      tarefas.splice(idx, 1);
      localStorage.setItem('tarefasPendentes', JSON.stringify(tarefas));
      listarTarefas();
    }
    function concluirTarefa(idx) {
      let tarefas = JSON.parse(localStorage.getItem('tarefasPendentes') || '[]');
      tarefas[idx].done = !tarefas[idx].done;
      localStorage.setItem('tarefasPendentes', JSON.stringify(tarefas));
      listarTarefas();
    }
    function listarTarefas() {
      let tarefas = JSON.parse(localStorage.getItem('tarefasPendentes') || '[]');
      let tbody = document.getElementById('tabelaTarefas').getElementsByTagName('tbody')[0];
      tbody.innerHTML = '';
      tarefas.forEach((t, idx) => {
        tbody.innerHTML += `
          <tr${t.done ? ' style="text-decoration:line-through;opacity:.6;"' : ''}>
            <td>${t.tarefa}</td>
            <td>
              <button onclick="concluirTarefa(${idx})" title="Concluir" style="color:var(--c4);background:none;border:none;font-size:1.1rem;">
                <i class="fas fa-${t.done ? 'undo' : 'check'}"></i>
              </button>
            </td>
            <td class="table-actions">
              <button onclick="removerTarefa(${idx})" title="Remover"><i class="fas fa-trash"></i></button>
            </td>
          </tr>`;
      });
      cancelarEdicaoTarefa();
    }
    listarTarefas();
    // --- CONTROLE FINANCEIRO ---
    let finEditIdx = null;
    function adicionarFinanceiro() {
      const nome = document.getElementById('nomeFinanceiro').value.trim();
      const valor = document.getElementById('valorFinanceiro').value.trim();
      const status = document.getElementById('statusFinanceiro').value;
      if (!nome || !valor) { alert('Preencha nome e valor.'); return; }
      let lista = JSON.parse(localStorage.getItem('controleFinanceiro') || '[]');
      if (finEditIdx === null) {
        lista.push({nome, valor, status});
      } else {
        lista[finEditIdx] = {nome, valor, status};
        finEditIdx = null;
        document.getElementById('btnFinAdd').style.display = 'none';
        document.getElementById('btnFinEdit').style.display = 'none';
        document.getElementById('btnFinCancel').style.display = 'none';
      }
      localStorage.setItem('controleFinanceiro', JSON.stringify(lista));
      listarFinanceiro();
      document.getElementById('nomeFinanceiro').value = '';
      document.getElementById('valorFinanceiro').value = '';
      mostrarBotoesFinanceiro();
    }
    function editarFinanceiro(idx) {
      let lista = JSON.parse(localStorage.getItem('controleFinanceiro') || '[]');
      document.getElementById('nomeFinanceiro').value = lista[idx].nome;
      document.getElementById('valorFinanceiro').value = lista[idx].valor;
      document.getElementById('statusFinanceiro').value = lista[idx].status;
      finEditIdx = idx;
      document.getElementById('btnFinAdd').style.display = 'none';
      document.getElementById('btnFinEdit').style.display = '';
      document.getElementById('btnFinCancel').style.display = '';
      document.getElementById('btnFinLimpar').style.display = 'none';
    }
    function confirmarEdicaoFinanceiro() { adicionarFinanceiro(); }
    function cancelarEdicaoFinanceiro() {
      finEditIdx = null;
      document.getElementById('nomeFinanceiro').value = '';
      document.getElementById('valorFinanceiro').value = '';
      document.getElementById('statusFinanceiro').value = 'Pago';
      document.getElementById('btnFinAdd').style.display = 'none';
      document.getElementById('btnFinEdit').style.display = 'none';
      document.getElementById('btnFinCancel').style.display = 'none';
      mostrarBotoesFinanceiro();
    }
    function limparFinanceiroCampos() {
      document.getElementById('nomeFinanceiro').value = '';
      document.getElementById('valorFinanceiro').value = '';
      mostrarBotoesFinanceiro();
    }
    function removerFinanceiro(idx) {
      let lista = JSON.parse(localStorage.getItem('controleFinanceiro') || '[]');
      lista.splice(idx,1);
      localStorage.setItem('controleFinanceiro', JSON.stringify(lista));
      listarFinanceiro();
    }
    function listarFinanceiro() {
      let lista = JSON.parse(localStorage.getItem('controleFinanceiro') || '[]');
      let tbody = document.getElementById('tabelaFinanceiro').getElementsByTagName('tbody')[0];
      tbody.innerHTML = '';
      lista.forEach((f, idx) => {
        tbody.innerHTML += `
          <tr>
            <td>${f.nome}</td>
            <td>R$ ${f.valor}</td>
            <td>${f.status}</td>
            <td class="table-actions">
              <button onclick="removerFinanceiro(${idx})" title="Remover"><i class="fas fa-trash"></i></button>
            </td>
          </tr>`;
      });
      cancelarEdicaoFinanceiro();
    }
    listarFinanceiro();
    // EXPORTAÇÃO / IMPORTAÇÃO
    function exportarDados() {
      const dados = {
        blocoNotas: localStorage.getItem('blocoNotas') || '',
        diarioClasse: localStorage.getItem('diarioClasse') || '',
        alunosAnyDesk: localStorage.getItem('alunosAnyDesk') || '[]',
        tarefasPendentes: localStorage.getItem('tarefasPendentes') || '[]',
        anotacoesRapidas: localStorage.getItem('anotacoesRapidas') || '[]',
        controleFinanceiro: localStorage.getItem('controleFinanceiro') || '[]'
      };
      const blob = new Blob([JSON.stringify(dados, null, 2)], {type: "application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "dashboard_rs_tech_backup.json";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
    function importarDados(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const dados = JSON.parse(e.target.result);
          if (typeof dados !== "object") throw new Error("Formato inválido!");
          if ("blocoNotas" in dados) localStorage.setItem('blocoNotas', dados.blocoNotas);
          if ("diarioClasse" in dados) localStorage.setItem('diarioClasse', dados.diarioClasse);
          if ("alunosAnyDesk" in dados) localStorage.setItem('alunosAnyDesk', dados.alunosAnyDesk);
          if ("tarefasPendentes" in dados) localStorage.setItem('tarefasPendentes', dados.tarefasPendentes);
          if ("anotacoesRapidas" in dados) localStorage.setItem('anotacoesRapidas', dados.anotacoesRapidas);
          if ("controleFinanceiro" in dados) localStorage.setItem('controleFinanceiro', dados.controleFinanceiro);
          document.getElementById('blocoNotas').value = localStorage.getItem('blocoNotas') || '';
          document.getElementById('diarioClasse').value = localStorage.getItem('diarioClasse') || '';
          listarAlunos(); listarTarefas(); listarAnotacoes(); listarFinanceiro();
          alert("Dados importados com sucesso!");
        } catch(e) {
          alert("Falha na importação: " + e.message);
        }
      };
      reader.readAsText(file);
      event.target.value = "";
    }
  </script>
</body>
</html>
